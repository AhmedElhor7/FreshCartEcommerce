import{r as a,i as x,f as g,j as e,H as h,L as f,a as b}from"./index-n4zlNQvh.js";import{c as w,a as i,u as j}from"./index.esm-CRP9ptq8.js";function k(){const{userLogin:y,setUserLogin:t}=a.useContext(x),d=g(),[c,o]=a.useState(!1),[n,l]=a.useState("");a.useEffect(()=>{t(null)},[]);async function u(p){o(!0);try{const r=await b.post("https://ecommerce.routemisr.com/api/v1/auth/signin",p);console.log(r),r.data.message==="success"&&(localStorage.setItem("userToken",r.data.token),t(r.data.token),d("/"),window.location.reload())}catch(r){r.response?l(r.response.data.message):l("An unexpected error occurred.")}finally{o(!1)}}const m=w().shape({email:i().email("Email Is Not Valid").required("Email Is Required"),password:i().matches(/^(?=.*[A-Z])[A-Za-z0-9.@*]{6,11}$/,"Password must contain at least one uppercase letter and be between 6 to 11 characters long.").required("Password Is Required")}),s=j({initialValues:{email:"",password:""},validationSchema:m,onSubmit:u});return e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsx("title",{children:"Login "})}),e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 green-color 2xl:mt-28",children:"Login Now"}),n&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50",role:"alert",children:n}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email,type:"email",name:"email",id:"userEmail",className:"block py-2.5 px-0 w-full text-sm text-gray-900 dark:text-gray-400 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-green-600 peer",placeholder:" "}),e.jsx("label",{htmlFor:"userEmail",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-green-600",children:"Email address"})]}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50",role:"alert",children:s.errors.email}),e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password,type:"password",name:"password",id:"userPassword",className:"block py-2.5 px-0 w-full text-sm text-gray-900 dark:text-gray-400 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-green-600 peer",placeholder:" "}),e.jsx("label",{htmlFor:"userPassword",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-green-600",children:"Password"})]}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50",role:"alert",children:s.errors.password}),e.jsx("button",{type:"submit",className:"btn btn-primary text-white font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center",children:c?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"Login"}),e.jsx("div",{children:e.jsxs("p",{children:["Don't have an account?",e.jsx("span",{className:"text-xl px-2 cursor-pointer green-color",children:e.jsx(f,{to:"/Register",children:"Register Now"})})]})})]})]})]})}export{k as default};
