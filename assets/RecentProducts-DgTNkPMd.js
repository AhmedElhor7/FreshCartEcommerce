import{r as a,C as A,W as F,b as R,j as t,R as I,L as V,_ as r,a as E}from"./index-Bnea2YKu.js";function $(){const m=()=>{const e=localStorage.getItem("productIds");return e?JSON.parse(e):[]},[c,d]=a.useState(""),p=()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){const s=new e;s.lang="en-US",s.interimResults=!1,s.onstart=()=>{console.log("Voice recognition started. Speak now.")},s.onspeechend=()=>{s.stop(),console.log("Voice recognition ended.")},s.onresult=i=>{const x=i.results[0][0].transcript;console.log("Voice input: ",x),d(x)},s.onerror=i=>{console.error("Voice recognition error:",i.error)},s.start()}else r.error("Your browser does not support speech recognition.")},{addProductToCart:f,cartData:w,cartItemsNo:T,setCartItemsNo:y}=a.useContext(A),{wishList:j,addProductToWishList:v,removeProductFromWishList:b}=a.useContext(F),[h,N]=a.useState(),[u,n]=a.useState(!1),[l,C]=a.useState(m()),g=e=>j.includes(e);async function k(e){n(!0);try{if(l.includes(e)){r.error("Product is already added to the cart. If you need to increase the quantity, please go to the Cart"),n(!1);return}N(e);let s=await f(e);console.log(s),s.data.status==="success"?(C(i=>[...i,e]),y(w.data.data.products.length+1),n(!1),r.success(s.data.message,{duration:5e3,position:window.innerWidth<768?"top-center":"right-top",style:{height:"5rem"}})):(n(!1),r.error(s.data.message))}catch(s){console.error("Failed to add product:",s),r.error("Failed to add product.")}}a.useEffect(()=>{localStorage.setItem("productIds",JSON.stringify(l))},[l]);function S(){return E.get("https://ecommerce.routemisr.com/api/v1/products")}const{data:o,error:M,isError:q,isFetched:Y,isLoading:L}=R({queryKey:["RecentProducts"],queryFn:S});if(L)return t.jsx("div",{className:"w-full h-screen flex justify-center items-center",children:t.jsx(I,{color:"green",size:150})});const P=c?o==null?void 0:o.data.data.filter(e=>e.category.name.toLowerCase().includes(c.toLowerCase())):o==null?void 0:o.data.data;async function W(e){if(g(e)){let s=await b(e);s.data.status==="success"?r.success(s.data.message,{duration:5e3,position:window.innerWidth<768?"top-center":"right-top",style:{height:"5rem"}}):r.error(s.data.message||"Failed to remove from wishlist")}else{let s=await v(e);s.data.status==="success"?r.success(s.data.message,{duration:5e3,position:window.innerWidth<768?"top-center":"right-top",style:{height:"5rem"}}):r.error(s.data.message||"Failed to add to wishlist")}}return t.jsx(t.Fragment,{children:t.jsx("section",{children:t.jsxs("div",{className:"container mx-auto py-2",children:[t.jsxs("div",{className:"flex items-center w-9/12 mx-auto",children:[t.jsx("label",{htmlFor:"voiceSearch",className:"sr-only",children:"Search"}),t.jsxs("div",{className:"relative w-full",children:[t.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:t.jsx("svg",{className:"w-6 h-6 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 21",children:t.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.15 5.6h.01m3.337 1.913h.01m-6.979 0h.01M5.541 11h.01M15 15h2.706a1.957 1.957 0 0 0 1.883-1.325A9 9 0 1 0 2.043 11.89 9.1 9.1 0 0 0 7.2 19.1a8.62 8.62 0 0 0 3.769.9A2.013 2.013 0 0 0 13 18v-.857A2.034 2.034 0 0 1 15 15Z"})})}),t.jsx("input",{type:"text",id:"voiceSearch",value:c,onChange:e=>d(e.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 py-3 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search Categories With Your Voice",required:!0}),t.jsx("button",{title:"You Can Search Categories With Your Voice",type:"button",className:"absolute inset-y-0 end-0 flex items-center pe-3",onClick:p,children:t.jsx("svg",{className:"w-6 h-6 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 20",children:t.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 7v3a5.006 5.006 0 0 1-5 5H6a5.006 5.006 0 0 1-5-5V7m7 9v3m-3 0h6M7 1h2a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3Z"})})})]})]}),t.jsx("div",{className:"row",children:P.map(e=>t.jsx("div",{className:"xl:w-1/4 md:w-1/2 p-4",children:t.jsxs("div",{className:"product hover:shadow-2xl hover:shadow-green-500 px-4",children:[t.jsxs(V,{to:`/productsdetails/${e.id}/${e.category.name}`,children:[t.jsx("div",{children:t.jsx("img",{loading:"lazy",src:e.imageCover,alt:e.title,className:"w-full"})}),t.jsx("p",{className:"font-normal text-green-500 uppercase py-2",children:e.category.name}),t.jsx("h3",{className:"font-extrabold uppercase",children:e.title.split(" ",2).join(" ")}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"font-medium line-through text-gray-500 text-xl",children:[e.price+50," EGP"]}),t.jsxs("span",{className:"text-red-500 font-extrabold",children:[e.price," EGP"]}),t.jsxs("span",{className:"text-xl",children:[" ",t.jsx("i",{className:"fa-solid fa-star text-yellow-200"})," ",t.jsx("span",{children:e.ratingsAverage})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("button",{onClick:()=>k(e.id),disabled:u&&e.id===h,className:"flex justify-center items-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:[t.jsx("i",{className:"fa-solid fa-cart-plus me-2"}),u&&e.id===h?"Adding...":"Add to Cart"]}),t.jsx("button",{onClick:()=>W(e.id),className:"cursor-pointer",children:t.jsx("i",{className:`fa-solid fa-heart text-3xl ${g(e.id)?"text-red-500":"text-gray-500"}`})},e.id)]})]})},e.id))})]})})})}export{$ as R};
